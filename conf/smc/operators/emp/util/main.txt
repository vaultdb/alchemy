

// expects as arguments party (1 = alice, 2 = bob) plus the port it will run the protocols over

public:
	void run(int party, int port) {
    NetIO * io = new NetIO((party==ALICE ? nullptr : bobHost.c_str()), port);
    
    setup_semi_honest(io, party);
    
$functions
    
    	Data * results = $rootOutput;

		int tupleLen = results->data[0].size();

		long outputSize = results->public_size * tupleLen;
		output = new bool[outputSize];
		bool *writePtr = output;
		bool *tuple;
		for(int i = 0; i < results->public_size; ++i) {
			tuple = outputBits(results->data[i], tupleLen, XOR);
			memcpy(writePtr, tuple, tupleLen);
			writePtr += tupleLen;
		}

		io->flush();
		delete io;
		
	}

    bool *getOutput() {
    	return output;
    }
}; // end class
} // end namespace
 
